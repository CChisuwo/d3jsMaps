<h1>Welcome to auto D3 Maps</h1>
<div class="well" ng-if="!hasUsed">
  <p>The purpose of this app is to make building maps with D3 as easy as possible. All you have to do is type in the country you want and select what kind of map you want. 
    We will then generate the map for you, show it to you and allow you to download the code for further customization</p>
  <h4>Enjoy!</h4>
</div>
<div class="row">
  <form role="form">
    <div class="col-xs-12 col-sm-4">
      <div class="form-group">
        <input type="text" ng-model="selectedCountry" typeahead="c.value for c in countries | filter:{value:$viewValue}" class="form-control input-lg" placeholder="Type in a country name">
      </div>
      <h3 class="noTopMargin">What kind of map do you want?</h3>
      <div class="radio">
        <label ng-class="_adm0 ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_adm0" ng-disabled="_adm0"> country
        </label>
      </div>
      <div class="radio">
        <label ng-class="_adm1 ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_adm1" ng-disabled="_adm1"> country, states
        </label>
      </div>
      <div class="radio">
        <label ng-class="_adm2 ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_adm2" ng-disabled="_adm2"> country, states, cities
        </label>
      </div>
      <div class="radio">
        <label ng-class="_adm3 ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_adm3" ng-disabled="_adm3"> country, states, cities, towns
        </label>
      </div>
      <div class="radio">
        <label ng-class="_water_areas_dcw ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_water_areas_dcw" ng-disabled="_water_areas_dcw"> Inland water
        </label>
      </div>
      <div class="radio">
        <label ng-class="_roads ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_roads" ng-disabled="_roads"> roads
        </label>
      </div>
      <div class="radio">
        <label ng-class="_rails ? 'disabled' : ''">
          <input type="radio" name="mapkind" ng-model="mapKind" value="_rails" ng-disabled="_rails"> railroads
        </label>
      </div>
    </div>
    <div class="col-xs-12 col-sm-8">
      <div class="alert alert-danger" ng-show="showError" ng-bind="errorMsg"></div>
      <div class="spinner" ng-show="loading">
        <div class="double-bounce1"></div>
        <div class="double-bounce2"></div>
      </div>
      <map></map>
    </div>
</div>
<div class="text-center">
  <button class="btn btn-primary" ng-click="getCountrySelected()" ng-disabled="loading">Get map &amp; code</button>
</div>
<div class="row" id="codeTemplates" ng-if="toggleCode">
  <p class="help-block text-center">You will need to be running a local server in order to make an ajax call to fetch the mapData.json file </p>
  <div class="col-xs-12 col-sm-6">
    <h3 class="noMarginTop">index.html</h3>
    <pre>
<code language="html">&lt;!DOCTYPE html&gt;
&lt;meta charset="utf-8"&gt;
&lt;style&gt;
 .boundary{
  fill: none;
  stroke: #000;
  stroke-linejoin: round;
 }
&lt;/style&gt;
&lt;body&gt;
 &lt;div id="map"&gt;&lt;/div&gt;
 &lt;script src="http://d3js.org/d3.v3.min.js"&gt;&lt;/script&gt;
 &lt;script src="http://d3js.org/topojson.v1.min.js"&gt;&lt;/script&gt;
 &lt;script&gt;
  var height = 469;
  var width = 750;
  var projection = {{countryProjection}};
  var path = d3.geo.path().projection(projection);

  var svg = d3.select("#map").append("svg").attr("width", width).attr("height", height);
  d3.json('mapData.json', function(country) {
    var b, s, t;
    var countryTopo = topojson.feature(country, country.objects.{{countryObj.id}}{{mapKind}});
    projection.scale(1).translate([0, 0]);
    b = path.bounds(countryTopo);
    s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height);
    t = [(width - s * (b[1][0] + b[0][0])) / 2, (height - s * (b[1][1] + b[0][1])) / 2];
    projection.scale(s).translate(t);
    var features = topojson.feature(country, country.objects.{{countryObj.id}}{{mapKind}}).features;
    svg.append('g')
      .attr('class', 'boundary')
      .selectAll('path')
      .data(features)
      .enter().append('path')
      .attr('d', path);
  });
 &lt;/script&gt;
&lt;/body&gt;</code>
    </pre>
  </div>
  <div class="col-xs-12 col-sm-6">
    <h3>mapData.json</h3>
    <pre class="dataBox">
<code language="javascript">{{mapData}}</code>
    </pre>
  </div>
</div>
