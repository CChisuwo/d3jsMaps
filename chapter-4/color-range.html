<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Color scale</title>
  <style>
    svg {
      border-style: solid;
      border-width: 1px;
      border-color: #ccc;
    }
    rect {
      stroke-width: 1;
      stroke:white;
    }
  </style>
</head>

<body>

  <!-- <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script> -->
  <script src="../lib/d3.v4.min.js"></script>
  <script>
    (function() {

    

    var makeData = function(n){
      var arr = [];

      for (var i=0; i<n; i++){
        arr.push({
          x:30,
          y:15 * (i+0.2),
          width:100,
          height:15,
        })
      };

      return arr;
    };

    var rectangles = function(svg) {
      var data = makeData(33);

      var color = d3.scaleLinear().domain([0,33]).range(['red', 'yellow']);

      var rect = svg.selectAll('rect').data(data);

      // Enter
      rect.enter().append('rect')
        .attr('x', function(d){ return d.x; })
        .attr('y', function(d){ return d.y; })
        .attr('width', function(d){ return d.width; })
        .attr('height', function(d){ return d.height; })
        .attr('fill', function(d,i){ return color(i) })

      var labels = svg.selectAll('text').data(data);
        
      labels.enter().append('text')
        .attr('x', 132)
        .attr('y', function(d,i) { return d.y + 12 })
        .style('font-size', 10)
        .style('text-decoration', 'underline')
        .text(function(d,i) { return color(i)});


        
    };

    var svg = d3.select("body")
        .append("svg")
        .attr("width", 250)
        .attr("height", 505);

    rectangles(svg);

    setInterval(function(){
      rectangles(svg);
    },1000);

    })();
  </script>
</body>
</html>

